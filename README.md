# å®˜å ±ãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰

å®˜å ±PDFå–å¾—API - å®˜å ±æ–‡æ›¸ã®PDFã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹APIã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
kanpo-viewer/
â”œâ”€â”€ api/                          # FastAPI ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py              # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”œâ”€â”€ core/                # è¨­å®šã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py        # ç’°å¢ƒè¨­å®š
â”‚   â”‚   â”‚   â””â”€â”€ security.py      # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½
â”‚   â”‚   â”œâ”€â”€ api/                 # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ pdf.py           # PDFé–¢é€£API
â”‚   â”‚   â”œâ”€â”€ schemas/             # ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”‚   â”‚   â””â”€â”€ pdf.py           # PDFã‚¹ã‚­ãƒ¼ãƒå®šç¾©
â”‚   â”‚   â”œâ”€â”€ services/            # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”‚   â””â”€â”€ simple_pdf_service.py  # PDFå‡¦ç†ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚   â”œâ”€â”€ models/              # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â””â”€â”€ utils/               # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â””â”€â”€ tests/                   # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚       â”œâ”€â”€ unit/                # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚       â”œâ”€â”€ integration/         # çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚       â””â”€â”€ fixtures/            # ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ requirements.txt             # æœ¬ç•ªä¾å­˜é–¢ä¿‚
â”œâ”€â”€ requirements_test.txt        # ãƒ†ã‚¹ãƒˆä¾å­˜é–¢ä¿‚
â”œâ”€â”€ pytest.ini                  # Pytestã®è¨­å®š
â””â”€â”€ vercel.json                  # Vercelãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š
```

## âš™ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: FastAPI (Python)
- **éåŒæœŸå‡¦ç†**: aiohttp
- **è¨­å®šç®¡ç†**: Pydantic Settings
- **ãƒ†ã‚¹ãƒˆ**: pytest
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: Vercel
- **ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†**: aiofiles

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

1. **ãƒ­ãƒ¼ã‚«ãƒ«ã¸ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹**
    ```bash
    git clone https://github.com/testkun08080/kanpo-viewer.git
   ```

2. **ä»®æƒ³ç’°å¢ƒã®æ§‹ç¯‰**
    ```bash
    cd kanpo-viewer
    uv venv -p 3.12
    uv pip install -r requirements.txt
   ```
   
3. **èµ·å‹•**
    ```bash
    uv run -m api.app.main
   ```

## ğŸ§ª Pytestã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆ

1. **ãƒ†ã‚¹ãƒˆç”¨ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
    ```bash
    uv pip install -r requirements_test.txt
   ```
1. **Pytestå®Ÿè¡Œ**
    ```bash
    uv run pytest --html=report.html --self-contained-html --log-level=INFO
   ```


## ğŸ“¡ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### åŸºæœ¬æƒ…å ±
- **ãƒ™ãƒ¼ã‚¹URL**: `/api` (æœ¬ç•ªç’°å¢ƒ)
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: `/docs` (é–‹ç™ºç’°å¢ƒã®ã¿)

### ä¸»è¦ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### 1. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
```http
GET /
```
ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "message": "Kanpo PDF Download API",
  "version": "0.1.0",
  "endpoints": {
    "health": "/api/pdf/health",
    "download": "/api/pdf/download"
  }
}
```

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

1. **ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ†ã‚¹ãƒˆ**
    ```bash
    vercel dev
   ```

2. **vercelã¸ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ã—ã¦ï¼‰**
    ```bash
    vercel
   ```

3. **ã€vercelã¸ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¨ã—ã¦ï¼‰**
    ```bash
    vercel --prod
   ```
